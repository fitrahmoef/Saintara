================================================================================
FRONTEND ARCHITECTURE - QUICK REFERENCE SUMMARY
================================================================================

1. FRAMEWORK & TECH STACK
   Framework:              Next.js 14.1 (App Router)
   UI Library:             React 18.2
   Language:               TypeScript (strict mode)
   Styling:                Tailwind CSS 3.4.1
   HTTP Client:            Axios with interceptors
   State Management:       React Context API (2 contexts)
   Icons:                  React Icons 5.0.1
   Animations:             AOS (Animate On Scroll) 2.3.4
   Charts:                 Chart.js 4.4.1 + react-chartjs-2
   Testing:                Jest + React Testing Library
   Total Files:            58 TypeScript/JavaScript files

2. ROUTING STRUCTURE
   Public Routes:          17 pages (landing, login, products, info)
   Protected User Routes:  15 pages (/dashboard/*)
   Protected Admin Routes: 12 pages (/admin/*)
   Dynamic Routes:         [id] patterns for dynamic segments
   Protection Method:      Layout-based with ProtectedRoute wrapper

3. STATE MANAGEMENT
   ┌─────────────────┬──────────────────────┬─────────────────────┐
   │ Context         │ State Variables      │ Key Methods         │
   ├─────────────────┼──────────────────────┼─────────────────────┤
   │ AuthContext     │ user, token,         │ login(), register(), │
   │                 │ isLoading            │ logout(), setUser()  │
   ├─────────────────┼──────────────────────┼─────────────────────┤
   │ ToastContext    │ toasts[]             │ showToast(), success(),│
   │                 │                      │ error(), info(),     │
   │                 │                      │ warning()            │
   └─────────────────┴──────────────────────┴─────────────────────┘

4. API ARCHITECTURE
   Client:                 Axios instance (lib/api.ts)
   Authentication:         Bearer token via localStorage
   Base URL:               process.env.NEXT_PUBLIC_API_URL
   Request Interceptor:    Auto-injects Authorization header
   Response Interceptor:   NONE (gap: no error handling)
   
   API Modules (70+ methods):
   - authAPI              (login, register, profile, password)
   - testAPI              (test creation, submission)
   - resultAPI            (results, PDF download)
   - adminAPI             (dashboard, users, stats)
   - transactionAPI       (payments, history)
   - voucherAPI           (voucher management)
   - agentAPI             (agent/sales management)
   - eventAPI             (events, registration)
   - approvalAPI          (workflow approvals)
   - articleAPI           (content management)
   - institutionAPI       (institution management)
   - customerAPI          (bulk operations)

5. COMPONENT ARCHITECTURE
   Root:                   /app/layout.tsx (provides contexts)
   Client Providers:       ClientLayout.tsx (ToastProvider + AuthProvider)
   Protected Routes:       ProtectedRoute.tsx (role-based access)
   Key Components:         Navbar, Footer, Calendar, ErrorBoundary
   Page Templates:         Dashboard layouts with sidebars
   Product Pages:          ProductLayout for product landing pages

6. AUTHENTICATION & AUTHORIZATION
   ┌──────────────────┬─────────────────────┬──────────────────┐
   │ Route Type       │ Protection          │ Roles            │
   ├──────────────────┼─────────────────────┼──────────────────┤
   │ Public           │ None                │ Anyone           │
   │ User Dashboard   │ ProtectedRoute      │ Authenticated    │
   │ Admin Dashboard  │ ProtectedRoute +    │ admin,           │
   │                  │ requireAdmin=true   │ superadmin,      │
   │                  │                     │ institution_admin│
   └──────────────────┴─────────────────────┴──────────────────┘

   Login Flow:
   1. User enters credentials
   2. POST /auth/login
   3. Store token + user in localStorage
   4. Redirect to /dashboard or /admin/dashboard
   5. Auto-inject token on all API calls

   Token Storage:
   - localStorage.setItem('token', authToken)
   - localStorage.setItem('user', JSON.stringify(userData))
   - SECURITY ISSUE: XSS vulnerable, no refresh mechanism

7. FORM HANDLING
   Pattern:                Controlled components with useState
   Validation:             HTML5 attributes + manual checks
   Library:                NONE (no Zod, Yup, or React Hook Form)
   
   Features:
   - Password show/hide toggle
   - Error message display
   - Loading states
   - Server-side error handling (try/catch)
   
   Gaps:
   - No field-level validation
   - No async validation
   - No complex validation rules
   - Limited accessibility

8. UI & STYLING
   Framework:              Tailwind CSS 3.4.1
   Colors:
   - saintara-yellow:      #FEC53D (primary accent)
   - saintara-black:       #000000 (primary text)
   - saintara-white:       #FFFFFF (backgrounds)
   
   Fonts:
   - Poppins               (headings)
   - Inter                 (body text)
   
   Responsive:             md:, lg: breakpoints
   No Component Library    (no shadcn/ui, Material-UI)
   Custom Built Components (buttons, cards, forms, layouts)

9. SECURITY ASSESSMENT
   ✓ IMPLEMENTED:
     - Bearer token authentication
     - Role-based route protection
     - Error boundary for runtime errors
     - Loading states with auth check
   
   ✗ CRITICAL GAPS:
     - Token in localStorage (XSS vulnerable)
     - No token refresh mechanism
     - No session timeout
     - No CSRF protection visible
     - No request signing
     - Logout doesn't invalidate server token
     - No API-level auth verification
     - User data stored unencrypted
   
   ⚠️ MODERATE GAPS:
     - No audit logging
     - No granular permissions (only admin/user)
     - Client-side auth only (bypassable)

10. CODE QUALITY ASSESSMENT
    ✓ STRENGTHS:
      - TypeScript strict mode
      - Clean separation of concerns
      - Consistent file organization
      - Good use of Next.js features
      - Error boundary implementation
      - Toast notification system
      - API module organization
    
    ✗ GAPS:
      - No validation library
      - No input sanitization
      - Inconsistent error handling
      - Direct API calls in components
      - Limited accessibility (ARIA labels)
      - No request/response logging
      - Type-safety issues (any[])
      - No unit tests visible
      - No request retry logic
      - No request cancellation

11. PERFORMANCE CONSIDERATIONS
    ✓ Optimizations:
      - Tailwind CSS (utility-first, optimal bundle)
      - Async route handling
      - Icon library (tree-shakeable)
      - Lazy loading with AOS animations
    
    ⚠️ Concerns:
      - No caching strategy (no React Query/SWR)
      - No request deduplication
      - No optimistic UI updates
      - localStorage reads on every mount
      - All consumers re-render on context change

12. DEPENDENCIES SUMMARY
    Production (7 main):
    - next 14.1.0
    - react 18.2.0
    - react-dom 18.2.0
    - axios 1.6.7
    - react-icons 5.0.1
    - aos 2.3.4
    - chart.js 4.4.1
    - react-chartjs-2 5.2.0
    
    DevDependencies (10 main):
    - typescript 5.3.3
    - tailwindcss 3.4.1
    - jest 29.7.0
    - @testing-library/* 14.2.1+
    - eslint 8.56.0
    - autoprefixer 10.4.17
    - postcss 8.4.35

13. CRITICAL RECOMMENDATIONS
    PRIORITY 1 (Security):
    1. Migrate token to httpOnly cookies
    2. Implement token refresh mechanism
    3. Add global error handling (401 → logout)
    4. Implement CSRF protection
    5. Add input validation (Zod + React Hook Form)
    
    PRIORITY 2 (Architecture):
    6. Extract API calls to custom hooks
    7. Implement caching (React Query/SWR)
    8. Add request/response logging
    9. Implement request retry + cancellation
    10. Add unit tests
    
    PRIORITY 3 (Polish):
    11. Add accessibility improvements
    12. Implement Storybook
    13. Add error tracking (Sentry)
    14. Implement i18n
    15. Add performance monitoring

14. FILE LOCATIONS (Critical Files)
    /home/user/Saintara/frontend/
    ├── app/layout.tsx                       (Root layout)
    ├── app/page.tsx                         (Landing page)
    ├── app/login/page.tsx                   (Login form)
    ├── app/register/page.tsx                (Registration form)
    ├── app/dashboard/layout.tsx             (User dashboard protection)
    ├── app/admin/layout.tsx                 (Admin dashboard protection)
    ├── components/ProtectedRoute.tsx        (Route protection logic)
    ├── components/ClientLayout.tsx          (Context providers)
    ├── components/Navbar.tsx                (Navigation)
    ├── contexts/AuthContext.tsx             (Auth state + login/logout)
    ├── contexts/ToastContext.tsx            (Notification system)
    ├── lib/api.ts                           (API client + endpoints)
    ├── tailwind.config.ts                   (Theme configuration)
    ├── tsconfig.json                        (TypeScript config)
    ├── next.config.js                       (Next.js config)
    └── package.json                         (Dependencies)

================================================================================
